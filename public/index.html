<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Docx viewer</title>
    <style>
        body {
            margin: 0; /* Reset default margin */
        }

        iframe {
            display: block; /* iframes are inline by default */
            background: #000;
            border: none; /* Reset default border */
            height: 100vh; /* Viewport-relative units */
            width: 100vw;
        }
    </style>
    <script src="/socket.io.local/socket.io.js"></script>
    <script type="text/javascript">
        function onLoadEvent() {
            const public_url = "<%= PUBLIC_URL %>";
            const file_name = "<%= GENERATED_FILENAME %>";
            const node_env = "<%= NODE_ENV %>";
            const socket = io();
            if (node_env === 'production') {
                console.log = function () {
                };
            }
            const iframe_src = "https://docs.google.com/gview?url=" + public_url + "/static/" + file_name + "&embedded=true";
            // load iframe on page load
            document.getElementById('docx-viewer-iframe').src = iframe_src;
            // reloading the iframe when the file is updated
            socket.on('reload', function () {
                document.getElementById('docx-viewer-iframe').src = iframe_src;
                console.log('reload event received');
            });
        }
    </script>
</head>
<body onload="onLoadEvent()">
<iframe id="docx-viewer-iframe">
</iframe>
</body>
</html>
